import{S as v}from"./sweetalert2.all-e8c98f31.js";import{_ as b,m as g,a as x,r as d,o as V,c as y,d as o,w as f,b as e,F as w,n as m,u as k,v as C,e as c}from"./index-0af1ca70.js";import{c as p}from"./cart-7b3fcaed.js";const L={data(){return{isLoading:!1,products:[],form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{isPhone(l){return/^(09)[0-9]{8}$/.test(l)?!0:"需要正確的電話號碼,範例: 0978197878"},createOrder(){this.isLoading=!0;const l="https://vue3-course-api.hexschool.io/v2/api/asher_api/order";this.$http.post(l,{data:this.form}).then(s=>{this.getCart(),this.isLoading=!1,this.$refs.form.resetForm(),this.form.message="",this.$router.push(`/checkorder/${s.data.orderId}`)}).catch(()=>{this.isLoading=!1,v.fire({icon:"error",title:"送出訂單失敗！",showConfirmButton:!1,text:"請將表單內容填寫完畢。",timer:2e3}),this.$refs.form.resetForm(),this.form.message=""})},getProductsAll(){const l="https://vue3-course-api.hexschool.io/v2/api/asher_api/products/all";this.isLoading=!0,this.$http.get(l).then(s=>{this.productsAll=s.data.products,this.isLoading=!1,this.createCategories()})},scrollTop(){window.scrollTo(0,0)},...g(p,["getCart"])},mounted(){this.scrollTop(),this.getCart()},computed:{...x(p,["cartData"])}},N=e("div",{class:"loadingio-spinner-ripple-j9w2wm5soxm"},[e("div",{class:"ldio-3c1sqxz2ek1"},[e("div"),e("div")])],-1),O={class:"main-block main-cart py-3"},T={class:"container container-block shadow-sm p-0 mb-4"},U={class:"order-text p-5 mx-5 mt-4"},q=e("h3",{class:"mb-4 text-center"},"訂單填寫",-1),B={class:"shopList orderList p-5 d-flex justify-content-center"},F={class:"mb-3"},S=e("label",{for:"name",class:"form-label text-name"},[c("收件人姓名"),e("span",{class:"text-danger"},"*")],-1),j={class:"mb-3"},A=e("label",{for:"email",class:"form-label"},[c("Email"),e("span",{class:"text-danger"},"*")],-1),E={class:"mb-3"},P=e("label",{for:"tel",class:"form-label"},[c("收件人電話"),e("span",{class:"text-danger"},"*")],-1),$={class:"mb-3"},z=e("label",{for:"address",class:"form-label"},[c("收件人地址"),e("span",{class:"text-danger"},"*")],-1),D={class:"mb-3"},I=e("label",{for:"message",class:"form-label"},"備註",-1),M={class:"d-flex justify-content-between mt-4"};function G(l,s,H,J,t,u){const h=d("Loading"),i=d("v-field"),n=d("error-message"),_=d("v-form");return V(),y(w,null,[o(h,{active:t.isLoading,class:"vld-overlay"},{default:f(()=>[N]),_:1},8,["active"]),e("main",O,[e("div",T,[e("div",U,[q,e("div",B,[o(_,{ref:"form",class:"col-md-6 formList"},{default:f(({errors:r})=>[e("div",F,[S,o(i,{id:"name",name:"姓名",type:"text",class:m(["form-control",{"is-invalid":r.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:t.form.user.name,"onUpdate:modelValue":s[0]||(s[0]=a=>t.form.user.name=a)},null,8,["class","modelValue"]),o(n,{name:"姓名",class:"invalid-feedback"})]),e("div",j,[A,o(i,{id:"email",name:"email",type:"email",class:m(["form-control",{"is-invalid":r.email}]),placeholder:"請輸入 Email",rules:"required|email",modelValue:t.form.user.email,"onUpdate:modelValue":s[1]||(s[1]=a=>t.form.user.email=a)},null,8,["modelValue","class"]),o(n,{name:"email",class:"invalid-feedback"})]),e("div",E,[P,o(i,{id:"tel",name:"電話",type:"text",class:m(["form-control",{"is-invalid":r.電話}]),placeholder:"請輸入電話",rules:u.isPhone,maxlength:"10",modelValue:t.form.user.tel,"onUpdate:modelValue":s[2]||(s[2]=a=>t.form.user.tel=a)},null,8,["class","rules","modelValue"]),o(n,{name:"電話",class:"invalid-feedback"})]),e("div",$,[z,o(i,{id:"address",name:"地址",type:"text",class:m(["form-control",{"is-invalid":r.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:t.form.user.address,"onUpdate:modelValue":s[3]||(s[3]=a=>t.form.user.address=a)},null,8,["class","modelValue"]),o(n,{name:"地址",class:"invalid-feedback"})]),e("div",D,[I,k(e("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":s[4]||(s[4]=a=>t.form.message=a)},`
              `,512),[[C,t.form.message]])])]),_:1},512)]),e("div",M,[e("button",{type:"button",class:"total-btn form-btn btn btn-color text-white py-2",onClick:s[5]||(s[5]=r=>l.$router.push("/carts"))}," 返回上頁 "),e("button",{type:"submit",class:"total-btn form-btn btn btn-danger py-2",onClick:s[6]||(s[6]=(...r)=>u.createOrder&&u.createOrder(...r))}," 送出訂單 ")])])])])],64)}const W=b(L,[["render",G]]);export{W as default};
