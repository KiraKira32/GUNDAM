import{g as _}from"./getCart-e8b3a81a.js";import{s as v}from"./scrollMixin-7cd75b34.js";import{S as b}from"./sweetalert2.all-0cb6e233.js";import{_ as g,r as d,o as x,c as V,b as o,w as f,a as e,F as k,n as m,q as y,v as w,d as c}from"./index-ce255eb7.js";const C={mixins:[_,v],data(){return{isLoading:!1,products:[],cartData:{},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{isPhone(l){return/^(09)[0-9]{8}$/.test(l)?!0:"需要正確的電話號碼,範例: 0978197878"},createOrder(){this.isLoading=!0;const l="https://vue3-course-api.hexschool.io/v2/api/asher_api/order";this.$http.post(l,{data:this.form}).then(s=>{this.getCart(),this.isLoading=!1,this.$refs.form.resetForm(),this.form.message="",this.$router.push(`/checkorder/${s.data.orderId}`)}).catch(()=>{this.isLoading=!1,b.fire({icon:"error",title:"送出訂單失敗！",showConfirmButton:!1,text:"請將表單內容填寫完畢。",timer:2e3}),this.$refs.form.resetForm(),this.form.message=""})},getProductsAll(){const l="https://vue3-course-api.hexschool.io/v2/api/asher_api/products/all";this.isLoading=!0,this.$http.get(l).then(s=>{this.productsAll=s.data.products,this.isLoading=!1,this.createCategories()})}},mounted(){this.getCart}},L=e("div",{class:"loadingio-spinner-ripple-j9w2wm5soxm"},[e("div",{class:"ldio-3c1sqxz2ek1"},[e("div"),e("div")])],-1),q={class:"main-block main-cart py-3"},N={class:"container container-block shadow-sm p-0 mb-4"},U={class:"cart-text p-5 mx-5 mt-4"},B=e("h3",{class:"mb-4 text-center"},"訂單填寫",-1),F={class:"shopList p-5 d-flex justify-content-center"},O={class:"mb-3"},j=e("label",{for:"name",class:"form-label"},[c("收件人姓名"),e("span",{class:"text-danger"},"*")],-1),E={class:"mb-3"},P=e("label",{for:"email",class:"form-label"},[c("Email"),e("span",{class:"text-danger"},"*")],-1),$={class:"mb-3"},z=e("label",{for:"tel",class:"form-label"},[c("收件人電話"),e("span",{class:"text-danger"},"*")],-1),A={class:"mb-3"},D=e("label",{for:"address",class:"form-label"},[c("收件人地址"),e("span",{class:"text-danger"},"*")],-1),M={class:"mb-3"},S=e("label",{for:"message",class:"form-label"},"備註",-1),T={class:"d-flex justify-content-between mt-4"};function I(l,s,G,H,t,u){const p=d("Loading"),i=d("v-field"),n=d("error-message"),h=d("v-form");return x(),V(k,null,[o(p,{active:t.isLoading,class:"vld-overlay"},{default:f(()=>[L]),_:1},8,["active"]),e("main",q,[e("div",N,[e("div",U,[B,e("div",F,[o(h,{ref:"form",class:"col-md-6"},{default:f(({errors:r})=>[e("div",O,[j,o(i,{id:"name",name:"姓名",type:"text",class:m(["form-control",{"is-invalid":r.姓名}]),placeholder:"請輸入姓名",rules:"required",modelValue:t.form.user.name,"onUpdate:modelValue":s[0]||(s[0]=a=>t.form.user.name=a)},null,8,["class","modelValue"]),o(n,{name:"姓名",class:"invalid-feedback"})]),e("div",E,[P,o(i,{id:"email",name:"email",type:"email",class:m(["form-control",{"is-invalid":r.email}]),placeholder:"請輸入 Email",rules:"required|email",modelValue:t.form.user.email,"onUpdate:modelValue":s[1]||(s[1]=a=>t.form.user.email=a)},null,8,["modelValue","class"]),o(n,{name:"email",class:"invalid-feedback"})]),e("div",$,[z,o(i,{id:"tel",name:"電話",type:"text",class:m(["form-control",{"is-invalid":r.電話}]),placeholder:"請輸入電話",rules:u.isPhone,maxlength:"10",modelValue:t.form.user.tel,"onUpdate:modelValue":s[2]||(s[2]=a=>t.form.user.tel=a)},null,8,["class","rules","modelValue"]),o(n,{name:"電話",class:"invalid-feedback"})]),e("div",A,[D,o(i,{id:"address",name:"地址",type:"text",class:m(["form-control",{"is-invalid":r.地址}]),placeholder:"請輸入地址",rules:"required",modelValue:t.form.user.address,"onUpdate:modelValue":s[3]||(s[3]=a=>t.form.user.address=a)},null,8,["class","modelValue"]),o(n,{name:"地址",class:"invalid-feedback"})]),e("div",M,[S,y(e("textarea",{id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":s[4]||(s[4]=a=>t.form.message=a)},`
              `,512),[[w,t.form.message]])])]),_:1},512)]),e("div",T,[e("button",{type:"button",class:"total-btn btn btn-color text-white py-2",onClick:s[5]||(s[5]=r=>l.$router.push("/carts"))}," 返回上頁 "),e("button",{type:"submit",class:"total-btn btn btn-danger py-2",onClick:s[6]||(s[6]=(...r)=>u.createOrder&&u.createOrder(...r))}," 送出訂單 ")])])])])],64)}const W=g(C,[["render",I]]);export{W as default};
