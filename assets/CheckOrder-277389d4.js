import{S as u}from"./sweetalert2.all-e8c98f31.js";import{_,r as p,o as s,c as o,d as m,w as y,b as t,f as d,F as a,h as b,t as i,e as f}from"./index-0af1ca70.js";const k={data(){return{isLoading:!1,order:{},orderId:""}},methods:{getOrders(){this.orderId=this.$route.params.id;const c=`https://vue3-course-api.hexschool.io/v2/api/asher_api/order/${this.orderId}`;this.$http.get(c).then(r=>{this.isLoading=!1,this.order=r.data.order}).catch(()=>{this.isLoading=!1})},payOrder(){this.orderId=this.$route.params.id;const c=`https://vue3-course-api.hexschool.io/v2/api/asher_api/pay/${this.orderId}`;this.$http.post(c).then(r=>{this.scrollTop(),r.data.success&&this.getOrders(),u.fire({icon:"success",title:"付款成功！",showConfirmButton:!1,timer:1500})}).catch(r=>{alert(r)})},scrollTop(){window.scrollTo(0,0)}},mounted(){this.orderId=this.$route.params.orderId,this.getOrders(),this.scrollTop()}},g=t("div",{class:"loadingio-spinner-ripple-j9w2wm5soxm"},[t("div",{class:"ldio-3c1sqxz2ek1"},[t("div"),t("div")])],-1),v={class:"main-block main-cart py-3"},x={class:"container container-block shadow-sm p-0 mb-4"},w={class:"cart-text p-5 mx-5 mt-4"},O={key:0,class:"mb-4 text-center text-white py-2",style:{background:"#bf0000"}},C={key:1,class:"mb-4 text-center text-white py-2",style:{background:"#bf0000"}},I={class:"shopList p-2"},L={key:0,class:"table align-middle"},T={class:"check-img"},N=["src"],$={class:"checkOrder-content"},j={width:"50"},B={class:"input-group input-group-sm"},D={class:"input-group checkOrder-content"},V={width:"100",class:"check-price"},Y={class:"text-danger align-middle checkOrder-content"},q={key:1,class:"d-flex justify-content-end align-items-center pb-3 pt-2"},S=t("div",{class:"text-secondary"},"小計",-1),E={class:"text-danger mx-4 fs-4 mt-0"},F={key:2,class:"mx-3"},H={class:"Customer-Infor"},M=t("h4",{class:"text-center py-3",style:{background:"#f4f4f4"}},"客戶訂單資料",-1),U={class:"table my-5 d-flex justify-content-center"},z={key:0},A=t("th",{width:"200",class:"order-num"},"訂單編號",-1),G=t("th",null,"訂單日期",-1),J=t("th",null,"Email",-1),K=t("th",null,"姓名",-1),P=t("th",null,"收件人電話",-1),Q=t("th",null,"收件人地址",-1),R=t("th",null,"付款狀態",-1),W={key:0,class:"text-danger"},X={key:1,class:"text-success"},Z=t("i",{class:"bi bi-check-circle me-1"},null,-1),tt={key:2,class:"d-flex justify-content-between mt-4"},et={key:3,class:"d-flex justify-content-center mt-4"};function st(c,r,ot,rt,e,l){const h=p("Loading");return s(),o(a,null,[m(h,{active:e.isLoading,class:"vld-overlay"},{default:y(()=>[g]),_:1},8,["active"]),t("main",v,[t("div",x,[t("div",w,[e.order.is_paid?d("",!0):(s(),o("h3",O," 付款確認 ")),e.order.is_paid?(s(),o("h3",C," 成功購買 ")):d("",!0),t("div",I,[e.order.is_paid?d("",!0):(s(),o("table",L,[t("tbody",null,[(s(!0),o(a,null,b(e.order.products,n=>(s(),o("tr",{key:n.id,style:{background:"#f4f4f4"}},[t("td",T,[t("img",{class:"check-img",src:n.product.imageUrl,alt:"item.product.imageUrl",style:{width:"130px"}},null,8,N)]),t("td",$,i(n.product.title),1),t("td",j,[t("div",B,[t("div",D,i(n.qty)+" 台",1)])]),t("td",V," NT$ "+i(c.$filters.currency(n.product.price)),1),t("td",Y," NT$"+i(c.$filters.currency(n.product.price*n.qty)),1)]))),128))])])),e.order.is_paid?d("",!0):(s(),o("div",q,[S,t("div",E,"NT$ "+i(c.$filters.currency(e.order.total)),1)])),e.order.is_paid?d("",!0):(s(),o("hr",F)),t("div",H,[M,t("table",U,[e.order.user?(s(),o("tbody",z,[t("tr",null,[A,t("td",null,i(e.order.id),1)]),t("tr",null,[G,t("td",null,i(c.$moment(new Date(e.order.create_at*1e3)).format("YYYY-MM-DD HH:mm")),1)]),t("tr",null,[J,t("td",null,i(e.order.user.email),1)]),t("tr",null,[K,t("td",null,i(e.order.user.name),1)]),t("tr",null,[P,t("td",null,i(e.order.user.tel),1)]),t("tr",null,[Q,t("td",null,i(e.order.user.address),1)]),t("tr",null,[R,t("td",null,[e.order.is_paid?(s(),o("span",X,[Z,f("付款完成")])):(s(),o("span",W,"尚未付款"))])])])):d("",!0)])])]),e.order.is_paid===!1?(s(),o("div",tt,[t("button",{type:"button",class:"total-btn check-btn btn btn-color text-white py-2",onClick:r[0]||(r[0]=n=>c.$router.push("/products"))}," 取消付款 "),t("button",{type:"button",class:"total-btn check-btn btn btn-danger py-2",onClick:r[1]||(r[1]=(...n)=>l.payOrder&&l.payOrder(...n))},"確認付款")])):d("",!0),e.order.is_paid===!0?(s(),o("div",et,[t("button",{type:"button",class:"total-btn btn btn-color text-white py-2",onClick:r[2]||(r[2]=n=>c.$router.push("/"))}," 回首頁 ")])):d("",!0)])])])],64)}const ct=_(k,[["render",st]]);export{ct as default};
