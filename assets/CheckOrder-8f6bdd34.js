import{S as h}from"./sweetalert2.all-6a93b67c.js";import{_ as p,r as _,o as s,c as o,d as m,w as y,b as t,f as l,F as a,h as f,t as n,e as b}from"./index-bf86740e.js";const g={data(){return{isLoading:!1,order:{},orderId:""}},methods:{getOrders(){this.orderId=this.$route.params.id;const d=`https://vue3-course-api.hexschool.io/v2/api/asher_api/order/${this.orderId}`;this.$http.get(d).then(r=>{this.isLoading=!1,this.order=r.data.order}).catch(()=>{this.isLoading=!1})},payOrder(){this.orderId=this.$route.params.id;const d=`https://vue3-course-api.hexschool.io/v2/api/asher_api/pay/${this.orderId}`;this.$http.post(d).then(r=>{this.scrollTop(),r.data.success&&this.getOrders(),h.fire({icon:"success",title:"付款成功！",showConfirmButton:!1,timer:1500})}).catch(r=>{alert(r)})},scrollTop(){window.scrollTo(0,0)}},mounted(){this.orderId=this.$route.params.orderId,this.getOrders(),this.scrollTop()}},x=t("div",{class:"loadingio-spinner-ripple-j9w2wm5soxm"},[t("div",{class:"ldio-3c1sqxz2ek1"},[t("div"),t("div")])],-1),v={class:"main-block main-cart py-3"},k={class:"container container-block shadow-sm p-0 mb-4"},w={class:"cart-text p-5 mx-5 mt-4"},C={key:0,class:"mb-4 text-center text-white py-2",style:{background:"#bf0000"}},I={key:1,class:"mb-4 text-center text-white py-2",style:{background:"#bf0000"}},L={class:"shopList p-2"},T={key:0,class:"table align-middle"},N=["src"],O={style:{width:"80px"}},$={class:"input-group input-group-sm",style:{width:"80px"}},j={class:"input-group"},B={class:"text-danger text-right"},D={class:"align-middle text-right px-0"},V={key:1,class:"d-flex justify-content-end align-items-center pb-3 pt-2"},Y=t("div",{class:"text-secondary"},"小計",-1),q={class:"text-danger mx-4 fs-4"},S={key:2,class:"mx-3"},E={class:"Customer-Infor"},F=t("h4",{class:"text-center py-3",style:{background:"#f4f4f4"}},"客戶訂單資料",-1),H={class:"table my-5 d-flex justify-content-center"},M={key:0},U=t("th",{width:"200"},"訂單編號",-1),z=t("th",{width:"200"},"訂單日期",-1),A=t("th",null,"Email",-1),G=t("th",null,"姓名",-1),J=t("th",null,"收件人電話",-1),K=t("th",null,"收件人地址",-1),P=t("th",null,"付款狀態",-1),Q={key:0,class:"text-danger"},R={key:1,class:"text-success"},W=t("i",{class:"bi bi-check-circle me-1"},null,-1),X={key:2,class:"d-flex justify-content-between mt-4"},Z={key:3,class:"d-flex justify-content-center mt-4"};function tt(d,r,et,st,e,c){const u=_("Loading");return s(),o(a,null,[m(u,{active:e.isLoading,class:"vld-overlay"},{default:y(()=>[x]),_:1},8,["active"]),t("main",v,[t("div",k,[t("div",w,[e.order.is_paid?l("",!0):(s(),o("h3",C," 付款確認 ")),e.order.is_paid?(s(),o("h3",I," 成功購買 ")):l("",!0),t("div",L,[e.order.is_paid?l("",!0):(s(),o("table",T,[t("tbody",null,[(s(!0),o(a,null,f(e.order.products,i=>(s(),o("tr",{key:i.id,style:{background:"#f4f4f4"}},[t("td",null,[t("img",{class:"carts-img",src:i.product.imageUrl,alt:"item.product.imageUrl",style:{width:"100px",height:"60px"}},null,8,N)]),t("td",null,n(i.product.title),1),t("td",O,[t("div",$,[t("div",j,n(i.qty)+" 台",1)])]),t("td",B," NT$ "+n(d.$filters.currency(i.product.price)),1),t("td",D," NT$"+n(d.$filters.currency(i.product.price*i.qty)),1)]))),128))])])),e.order.is_paid?l("",!0):(s(),o("div",V,[Y,t("div",q,"NT$ "+n(d.$filters.currency(e.order.total)),1)])),e.order.is_paid?l("",!0):(s(),o("hr",S)),t("div",E,[F,t("table",H,[e.order.user?(s(),o("tbody",M,[t("tr",null,[U,t("td",null,n(e.order.id),1)]),t("tr",null,[z,t("td",null,n(d.$moment(new Date(e.order.create_at*1e3)).format("YYYY-MM-DD HH:mm")),1)]),t("tr",null,[A,t("td",null,n(e.order.user.email),1)]),t("tr",null,[G,t("td",null,n(e.order.user.name),1)]),t("tr",null,[J,t("td",null,n(e.order.user.tel),1)]),t("tr",null,[K,t("td",null,n(e.order.user.address),1)]),t("tr",null,[P,t("td",null,[e.order.is_paid?(s(),o("span",R,[W,b("付款完成")])):(s(),o("span",Q,"尚未付款"))])])])):l("",!0)])])]),e.order.is_paid===!1?(s(),o("div",X,[t("button",{type:"button",class:"total-btn btn btn-color text-white py-2",onClick:r[0]||(r[0]=i=>d.$router.push("/products"))}," 取消付款 "),t("button",{type:"button",class:"total-btn btn btn-danger py-2",onClick:r[1]||(r[1]=(...i)=>c.payOrder&&c.payOrder(...i))},"確認付款")])):l("",!0),e.order.is_paid===!0?(s(),o("div",Z,[t("button",{type:"button",class:"total-btn btn btn-color text-white py-2",onClick:r[2]||(r[2]=i=>d.$router.push("/"))}," 回首頁 ")])):l("",!0)])])])],64)}const it=p(g,[["render",tt]]);export{it as default};
