import{S as h}from"./sweetalert2.all-63071786.js";import{_,r as p,o as s,c as o,d as m,w as y,b as t,f as l,F as a,h as b,t as i,e as f}from"./index-1b3ab0fe.js";const g={data(){return{isLoading:!1,order:{},orderId:""}},methods:{getOrders(){this.orderId=this.$route.params.id;const d=`https://vue3-course-api.hexschool.io/v2/api/asher_api/order/${this.orderId}`;this.$http.get(d).then(r=>{this.isLoading=!1,this.order=r.data.order}).catch(()=>{this.isLoading=!1})},payOrder(){this.orderId=this.$route.params.id;const d=`https://vue3-course-api.hexschool.io/v2/api/asher_api/pay/${this.orderId}`;this.$http.post(d).then(r=>{this.scrollTop(),r.data.success&&this.getOrders(),h.fire({icon:"success",title:"付款成功！",showConfirmButton:!1,timer:1500})}).catch(r=>{alert(r)})},scrollTop(){window.scrollTo(0,0)}},mounted(){this.orderId=this.$route.params.orderId,this.getOrders(),this.scrollTop()}},k=t("div",{class:"loadingio-spinner-ripple-j9w2wm5soxm"},[t("div",{class:"ldio-3c1sqxz2ek1"},[t("div"),t("div")])],-1),v={class:"main-block main-cart py-3"},x={class:"container container-block shadow-sm p-0 mb-4"},w={class:"cart-text p-5 mx-5 mt-4"},C={key:0,class:"mb-4 text-center text-white py-2",style:{background:"#bf0000"}},I={key:1,class:"mb-4 text-center text-white py-2",style:{background:"#bf0000"}},L={class:"shopList p-2"},O={key:0,class:"table align-middle"},T={class:"check-img"},N=["src"],$={width:"50"},j={class:"input-group input-group-sm"},B={class:"input-group"},D={width:"100",class:"check-price"},V={class:"text-danger align-middle"},Y={key:1,class:"d-flex justify-content-end align-items-center pb-3 pt-2"},q=t("div",{class:"text-secondary"},"小計",-1),S={class:"text-danger mx-4 fs-4"},E={key:2,class:"mx-3"},F={class:"Customer-Infor"},H=t("h4",{class:"text-center py-3",style:{background:"#f4f4f4"}},"客戶訂單資料",-1),M={class:"table my-5 d-flex justify-content-center"},U={key:0},z=t("th",{width:"200",class:"order-num"},"訂單編號",-1),A=t("th",null,"訂單日期",-1),G=t("th",null,"Email",-1),J=t("th",null,"姓名",-1),K=t("th",null,"收件人電話",-1),P=t("th",null,"收件人地址",-1),Q=t("th",null,"付款狀態",-1),R={key:0,class:"text-danger"},W={key:1,class:"text-success"},X=t("i",{class:"bi bi-check-circle me-1"},null,-1),Z={key:2,class:"d-flex justify-content-between mt-4"},tt={key:3,class:"d-flex justify-content-center mt-4"};function et(d,r,st,ot,e,c){const u=p("Loading");return s(),o(a,null,[m(u,{active:e.isLoading,class:"vld-overlay"},{default:y(()=>[k]),_:1},8,["active"]),t("main",v,[t("div",x,[t("div",w,[e.order.is_paid?l("",!0):(s(),o("h3",C," 付款確認 ")),e.order.is_paid?(s(),o("h3",I," 成功購買 ")):l("",!0),t("div",L,[e.order.is_paid?l("",!0):(s(),o("table",O,[t("tbody",null,[(s(!0),o(a,null,b(e.order.products,n=>(s(),o("tr",{key:n.id,style:{background:"#f4f4f4"}},[t("td",T,[t("img",{class:"check-img",src:n.product.imageUrl,alt:"item.product.imageUrl",style:{width:"100px",height:"60px"}},null,8,N)]),t("td",null,i(n.product.title),1),t("td",$,[t("div",j,[t("div",B,i(n.qty)+" 台",1)])]),t("td",D," NT$ "+i(d.$filters.currency(n.product.price)),1),t("td",V," NT$"+i(d.$filters.currency(n.product.price*n.qty)),1)]))),128))])])),e.order.is_paid?l("",!0):(s(),o("div",Y,[q,t("div",S,"NT$ "+i(d.$filters.currency(e.order.total)),1)])),e.order.is_paid?l("",!0):(s(),o("hr",E)),t("div",F,[H,t("table",M,[e.order.user?(s(),o("tbody",U,[t("tr",null,[z,t("td",null,i(e.order.id),1)]),t("tr",null,[A,t("td",null,i(d.$moment(new Date(e.order.create_at*1e3)).format("YYYY-MM-DD HH:mm")),1)]),t("tr",null,[G,t("td",null,i(e.order.user.email),1)]),t("tr",null,[J,t("td",null,i(e.order.user.name),1)]),t("tr",null,[K,t("td",null,i(e.order.user.tel),1)]),t("tr",null,[P,t("td",null,i(e.order.user.address),1)]),t("tr",null,[Q,t("td",null,[e.order.is_paid?(s(),o("span",W,[X,f("付款完成")])):(s(),o("span",R,"尚未付款"))])])])):l("",!0)])])]),e.order.is_paid===!1?(s(),o("div",Z,[t("button",{type:"button",class:"total-btn check-btn btn btn-color text-white py-2",onClick:r[0]||(r[0]=n=>d.$router.push("/products"))}," 取消付款 "),t("button",{type:"button",class:"total-btn check-btn btn btn-danger py-2",onClick:r[1]||(r[1]=(...n)=>c.payOrder&&c.payOrder(...n))},"確認付款")])):l("",!0),e.order.is_paid===!0?(s(),o("div",tt,[t("button",{type:"button",class:"total-btn btn btn-color text-white py-2",onClick:r[2]||(r[2]=n=>d.$router.push("/"))}," 回首頁 ")])):l("",!0)])])])],64)}const it=_(g,[["render",et]]);export{it as default};
