import"./sweetalert2.all-b334fceb.js";import{k as Y,l as V,p as J,q as K,s as Q,_ as U,o as k,c as P,b as l,n as F,g as O,F as H,h as G,t as A,S as W,r as E,d as S,w as B,m as Z,a as w,u as tt,v as et,x as at,e as st}from"./index-ca44f035.js";import{S as nt,a as lt}from"./swiper-slide-a05a7587.js";import{c as it}from"./swiper.min-44ea814e.js";import{A as ot}from"./autoplay-897ba7c3.js";import{c as R}from"./cart-74bd67f9.js";function D(t=""){return`.${t.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function rt({swiper:t,extendParams:i,on:s,emit:h}){const c="swiper-pagination";i({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:e=>e,formatFractionTotal:e=>e,bulletClass:`${c}-bullet`,bulletActiveClass:`${c}-bullet-active`,modifierClass:`${c}-`,currentClass:`${c}-current`,totalClass:`${c}-total`,hiddenClass:`${c}-hidden`,progressbarFillClass:`${c}-progressbar-fill`,progressbarOppositeClass:`${c}-progressbar-opposite`,clickableClass:`${c}-clickable`,lockClass:`${c}-lock`,horizontalClass:`${c}-horizontal`,verticalClass:`${c}-vertical`,paginationDisabledClass:`${c}-disabled`}}),t.pagination={el:null,bullets:[]};let d,o=0;const u=e=>(Array.isArray(e)||(e=[e].filter(a=>!!a)),e);function p(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&t.pagination.el.length===0}function y(e,a){const{bulletActiveClass:n}=t.params.pagination;e&&(e=e[`${a==="prev"?"previous":"next"}ElementSibling`],e&&(e.classList.add(`${n}-${a}`),e=e[`${a==="prev"?"previous":"next"}ElementSibling`],e&&e.classList.add(`${n}-${a}-${a}`)))}function r(e){const a=e.target.closest(D(t.params.pagination.bulletClass));if(!a)return;e.preventDefault();const n=V(a)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===n)return;const f=t.getSlideIndexByData(n),_=t.getSlideIndexByData(t.realIndex);f>t.slides.length-t.loopedSlides&&t.loopFix({direction:f>_?"next":"prev",activeSlideIndex:f,slideTo:!1}),t.slideToLoop(n)}else t.slideTo(n)}function g(){const e=t.rtl,a=t.params.pagination;if(p())return;let n=t.pagination.el;n=u(n);let f,_;const T=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,q=t.params.loop?Math.ceil(T/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(_=t.previousRealIndex||0,f=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex):typeof t.snapIndex<"u"?(f=t.snapIndex,_=t.previousSnapIndex):(_=t.previousIndex||0,f=t.activeIndex||0),a.type==="bullets"&&t.pagination.bullets&&t.pagination.bullets.length>0){const m=t.pagination.bullets;let L,b,z;if(a.dynamicBullets&&(d=Y(m[0],t.isHorizontal()?"width":"height",!0),n.forEach(v=>{v.style[t.isHorizontal()?"width":"height"]=`${d*(a.dynamicMainBullets+4)}px`}),a.dynamicMainBullets>1&&_!==void 0&&(o+=f-(_||0),o>a.dynamicMainBullets-1?o=a.dynamicMainBullets-1:o<0&&(o=0)),L=Math.max(f-o,0),b=L+(Math.min(m.length,a.dynamicMainBullets)-1),z=(b+L)/2),m.forEach(v=>{const C=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(x=>`${a.bulletActiveClass}${x}`)].map(x=>typeof x=="string"&&x.includes(" ")?x.split(" "):x).flat();v.classList.remove(...C)}),n.length>1)m.forEach(v=>{const C=V(v);C===f&&v.classList.add(...a.bulletActiveClass.split(" ")),a.dynamicBullets&&(C>=L&&C<=b&&v.classList.add(...`${a.bulletActiveClass}-main`.split(" ")),C===L&&y(v,"prev"),C===b&&y(v,"next"))});else{const v=m[f];if(v&&v.classList.add(...a.bulletActiveClass.split(" ")),a.dynamicBullets){const C=m[L],x=m[b];for(let I=L;I<=b;I+=1)m[I]&&m[I].classList.add(...`${a.bulletActiveClass}-main`.split(" "));y(C,"prev"),y(x,"next")}}if(a.dynamicBullets){const v=Math.min(m.length,a.dynamicMainBullets+4),C=(d*v-d)/2-z*d,x=e?"right":"left";m.forEach(I=>{I.style[t.isHorizontal()?x:"top"]=`${C}px`})}}n.forEach((m,L)=>{if(a.type==="fraction"&&(m.querySelectorAll(D(a.currentClass)).forEach(b=>{b.textContent=a.formatFractionCurrent(f+1)}),m.querySelectorAll(D(a.totalClass)).forEach(b=>{b.textContent=a.formatFractionTotal(q)})),a.type==="progressbar"){let b;a.progressbarOpposite?b=t.isHorizontal()?"vertical":"horizontal":b=t.isHorizontal()?"horizontal":"vertical";const z=(f+1)/q;let v=1,C=1;b==="horizontal"?v=z:C=z,m.querySelectorAll(D(a.progressbarFillClass)).forEach(x=>{x.style.transform=`translate3d(0,0,0) scaleX(${v}) scaleY(${C})`,x.style.transitionDuration=`${t.params.speed}ms`})}a.type==="custom"&&a.renderCustom?(m.innerHTML=a.renderCustom(t,f+1,q),L===0&&h("paginationRender",m)):(L===0&&h("paginationRender",m),h("paginationUpdate",m)),t.params.watchOverflow&&t.enabled&&m.classList[t.isLocked?"add":"remove"](a.lockClass)})}function $(){const e=t.params.pagination;if(p())return;const a=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length;let n=t.pagination.el;n=u(n);let f="";if(e.type==="bullets"){let _=t.params.loop?Math.ceil(a/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&_>a&&(_=a);for(let T=0;T<_;T+=1)e.renderBullet?f+=e.renderBullet.call(t,T,e.bulletClass):f+=`<${e.bulletElement} class="${e.bulletClass}"></${e.bulletElement}>`}e.type==="fraction"&&(e.renderFraction?f=e.renderFraction.call(t,e.currentClass,e.totalClass):f=`<span class="${e.currentClass}"></span> / <span class="${e.totalClass}"></span>`),e.type==="progressbar"&&(e.renderProgressbar?f=e.renderProgressbar.call(t,e.progressbarFillClass):f=`<span class="${e.progressbarFillClass}"></span>`),t.pagination.bullets=[],n.forEach(_=>{e.type!=="custom"&&(_.innerHTML=f||""),e.type==="bullets"&&t.pagination.bullets.push(..._.querySelectorAll(D(e.bulletClass)))}),e.type!=="custom"&&h("paginationRender",n[0])}function M(){t.params.pagination=it(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const e=t.params.pagination;if(!e.el)return;let a;typeof e.el=="string"&&t.isElement&&(a=t.el.shadowRoot.querySelector(e.el)),!a&&typeof e.el=="string"&&(a=[...document.querySelectorAll(e.el)]),a||(a=e.el),!(!a||a.length===0)&&(t.params.uniqueNavElements&&typeof e.el=="string"&&Array.isArray(a)&&a.length>1&&(a=[...t.el.querySelectorAll(e.el)],a.length>1&&(a=a.filter(n=>J(n,".swiper")[0]===t.el)[0])),Array.isArray(a)&&a.length===1&&(a=a[0]),Object.assign(t.pagination,{el:a}),a=u(a),a.forEach(n=>{e.type==="bullets"&&e.clickable&&n.classList.add(e.clickableClass),n.classList.add(e.modifierClass+e.type),n.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass),e.type==="bullets"&&e.dynamicBullets&&(n.classList.add(`${e.modifierClass}${e.type}-dynamic`),o=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),e.type==="progressbar"&&e.progressbarOpposite&&n.classList.add(e.progressbarOppositeClass),e.clickable&&n.addEventListener("click",r),t.enabled||n.classList.add(e.lockClass)}))}function N(){const e=t.params.pagination;if(p())return;let a=t.pagination.el;a&&(a=u(a),a.forEach(n=>{n.classList.remove(e.hiddenClass),n.classList.remove(e.modifierClass+e.type),n.classList.remove(t.isHorizontal()?e.horizontalClass:e.verticalClass),e.clickable&&n.removeEventListener("click",r)})),t.pagination.bullets&&t.pagination.bullets.forEach(n=>n.classList.remove(...e.bulletActiveClass.split(" ")))}s("changeDirection",()=>{if(!t.pagination||!t.pagination.el)return;const e=t.params.pagination;let{el:a}=t.pagination;a=u(a),a.forEach(n=>{n.classList.remove(e.horizontalClass,e.verticalClass),n.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass)})}),s("init",()=>{t.params.pagination.enabled===!1?j():(M(),$(),g())}),s("activeIndexChange",()=>{typeof t.snapIndex>"u"&&g()}),s("snapIndexChange",()=>{g()}),s("snapGridLengthChange",()=>{$(),g()}),s("destroy",()=>{N()}),s("enable disable",()=>{let{el:e}=t.pagination;e&&(e=u(e),e.forEach(a=>a.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),s("lock unlock",()=>{g()}),s("click",(e,a)=>{const n=a.target;let{el:f}=t.pagination;if(Array.isArray(f)||(f=[f].filter(_=>!!_)),t.params.pagination.el&&t.params.pagination.hideOnClick&&f&&f.length>0&&!n.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&n===t.navigation.nextEl||t.navigation.prevEl&&n===t.navigation.prevEl))return;const _=f[0].classList.contains(t.params.pagination.hiddenClass);h(_===!0?"paginationShow":"paginationHide"),f.forEach(T=>T.classList.toggle(t.params.pagination.hiddenClass))}});const X=()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=u(e),e.forEach(a=>a.classList.remove(t.params.pagination.paginationDisabledClass))),M(),$(),g()},j=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=u(e),e.forEach(a=>a.classList.add(t.params.pagination.paginationDisabledClass))),N()};Object.assign(t.pagination,{enable:X,disable:j,render:$,update:g,init:M,destroy:N})}function ct(t){const{effect:i,swiper:s,on:h,setTranslate:c,setTransition:d,overwriteParams:o,perspective:u,recreateShadows:p,getEffectParams:y}=t;h("beforeInit",()=>{if(s.params.effect!==i)return;s.classNames.push(`${s.params.containerModifierClass}${i}`),u&&u()&&s.classNames.push(`${s.params.containerModifierClass}3d`);const g=o?o():{};Object.assign(s.params,g),Object.assign(s.originalParams,g)}),h("setTranslate",()=>{s.params.effect===i&&c()}),h("setTransition",(g,$)=>{s.params.effect===i&&d($)}),h("transitionEnd",()=>{if(s.params.effect===i&&p){if(!y||!y().slideShadows)return;s.slides.forEach(g=>{g.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach($=>$.remove())}),p()}});let r;h("virtualUpdate",()=>{s.params.effect===i&&(s.slides.length||(r=!0),requestAnimationFrame(()=>{r&&s.slides&&s.slides.length&&(c(),r=!1)}))})}function dt(t,i){const s=K(i);return s!==i&&(s.style.backfaceVisibility="hidden",s.style["-webkit-backface-visibility"]="hidden"),s}function ft({swiper:t,duration:i,transformElements:s,allSlides:h}){const{activeIndex:c}=t,d=o=>o.parentElement?o.parentElement:t.slides.filter(p=>p.shadowEl&&p.shadowEl===o.parentNode)[0];if(t.params.virtualTranslate&&i!==0){let o=!1,u;h?u=s:u=s.filter(p=>{const y=p.classList.contains("swiper-slide-transform")?d(p):p;return t.getSlideIndex(y)===c}),u.forEach(p=>{Q(p,()=>{if(o||!t||t.destroyed)return;o=!0,t.animating=!1;const y=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(y)})})}}function ut({swiper:t,extendParams:i,on:s}){i({fadeEffect:{crossFade:!1}}),ct({effect:"fade",swiper:t,on:s,setTranslate:()=>{const{slides:d}=t,o=t.params.fadeEffect;for(let u=0;u<d.length;u+=1){const p=t.slides[u];let r=-p.swiperSlideOffset;t.params.virtualTranslate||(r-=t.translate);let g=0;t.isHorizontal()||(g=r,r=0);const $=t.params.fadeEffect.crossFade?Math.max(1-Math.abs(p.progress),0):1+Math.min(Math.max(p.progress,-1),0),M=dt(o,p);M.style.opacity=$,M.style.transform=`translate3d(${r}px, ${g}px, 0px)`}},setTransition:d=>{const o=t.slides.map(u=>K(u));o.forEach(u=>{u.style.transitionDuration=`${d}ms`}),ft({swiper:t,duration:d,transformElements:o,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!t.params.cssMode})})}const pt={props:["pages","categories","search"],methods:{updatePage(t){this.$emit("emitPages",t)},scrollTop(){window.scrollTo(0,0)}}},gt={"aria-label":"Page navigation example"},mt={class:"pagination justify-content-center"},ht=l("span",{"aria-hidden":"true"},"«",-1),_t=[ht],vt=["onClick"],yt=l("span",{"aria-hidden":"true"},"»",-1),bt=[yt];function Ct(t,i,s,h,c,d){return k(),P("div",{class:"pagintion-container",onClick:i[2]||(i[2]=(...o)=>d.scrollTop&&d.scrollTop(...o))},[l("nav",gt,[l("ul",mt,[l("li",{class:F(["page-item",{disabled:!s.pages.has_pre}])},[l("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:i[0]||(i[0]=O(o=>d.updatePage(s.pages.current_page-1),["prevent"]))},_t)],2),(k(!0),P(H,null,G(s.pages.total_pages,o=>(k(),P("li",{class:F(["page-item",{active:o===s.pages.current_page}]),key:o+"page"},[l("a",{class:"page-link",href:"#",onClick:O(u=>d.updatePage(o),["prevent"])},A(o),9,vt)],2))),128)),l("li",{class:F(["page-item",{disabled:!s.pages.has_next}])},[l("a",{class:"page-link",href:"#","aria-label":"Next",onClick:i[1]||(i[1]=O(o=>d.updatePage(s.pages.current_page+1),["prevent"]))},bt)],2)])])])}const xt=U(pt,[["render",Ct]]);const $t="/GUNDAM/assets/開幕優惠-89fa4197.png",kt="/GUNDAM/assets/限時滿額免運-f0fd7cef.png",Pt="/GUNDAM/assets/模型宣傳圖-b5a06054.png",Lt="/GUNDAM/assets/recruit-24573e72.png";W.use([ot]);const St={components:{Swiper:nt,SwiperSlide:lt},data(){return{modules:[rt,ut]}}},Tt={class:"container products-banner-container p-0"},At={class:"products-banner"},Bt=l("img",{class:"shadow-sm",src:$t,alt:""},null,-1),Mt=l("img",{class:"shadow-sm",src:kt,alt:""},null,-1),It=l("img",{class:"shadow-sm",src:Pt,alt:""},null,-1),Et=l("img",{class:"shadow-sm",src:Lt,alt:""},null,-1);function zt(t,i,s,h,c,d){const o=E("swiper-slide"),u=E("swiper");return k(),P("div",Tt,[l("div",At,[S(u,{spaceBetween:1,loop:!0,autoplay:{delay:6e3,disableOnInteraction:!1},modules:c.modules,class:"mySwiper-products"},{default:B(()=>[S(o,{class:"open-banner d-flex justify-content-center"},{default:B(()=>[Bt]),_:1}),S(o,{class:"freight-banner d-flex justify-content-center"},{default:B(()=>[Mt]),_:1}),S(o,{class:"publicity-banner d-flex justify-content-center"},{default:B(()=>[It]),_:1}),S(o,{class:"recruit-banner d-flex justify-content-center"},{default:B(()=>[Et]),_:1})]),_:1},8,["modules"])])])}const Dt=U(St,[["render",zt]]);const Ft={components:{Pagination:xt,ProductsBanner:Dt},data(){return{page:{},isLoading:!1,products:[],productsAll:[],filterProducts:[],category:"",categories:[],search:""}},methods:{getProducts(t=1){this.isLoading=!0;let i=`https://vue3-course-api.hexschool.io/v2/api/asher_api/products?page=${t}&category=${this.category}`;this.$http.get(i).then(s=>{this.isLoading=!1,this.products=s.data.products,this.page=s.data.pagination,this.filterProducts=this.products})},getProductsAll(){const t="https://vue3-course-api.hexschool.io/v2/api/asher_api/products/all";this.isLoading=!0,this.$http.get(t).then(i=>{this.productsAll=i.data.products,this.isLoading=!1,this.createCategories()})},createCategories(){if(this.productsAll.length!==0){const t=this.productsAll.map(i=>i.category);this.categories=[...new Set(t)]}else this.filterProducts=this.products},setCategory(t=""){this.category=t,this.getProducts()},productLink(t){this.$router.push(`/product/${t}`)},...Z(R,["addToCart","getCart"]),filterSearch(){this.isLoading=!0,setTimeout(()=>{this.filterProducts=this.productsAll.filter(t=>t.title.match(this.search)),this.isLoading=!1,this.search&&this.filterProducts.length<10?this.page={total_pages:1,current_page:1,has_pre:!1,has_next:!1}:this.page={total_pages:1,current_page:1,has_pre:!1,has_next:!1}},1e3)},scrollTop(){window.scrollTo(0,0)}},watch:{category(){this.getProducts()},search(){this.search?this.filterSearch():this.createCategories()}},computed:{...w(R,["cartData"])},mounted(){const t=this.$route.query.category;t&&(this.category=t),this.getCart(),this.scrollTop(),this.getProducts(),this.getProductsAll()}},Ot={class:"container"},Nt=l("div",{class:"loadingio-spinner-ripple-j9w2wm5soxm"},[l("div",{class:"ldio-3c1sqxz2ek1"},[l("div"),l("div")])],-1),qt={"aria-label":"breadcrumb"},Ht={class:"breadcrumb pt-3"},Gt={class:"breadcrumb-item"},Ut=l("li",{class:"breadcrumb-item active","aria-current":"page"},"商品",-1),jt={class:"productlist"},Vt={class:"row"},Rt={class:"col-md-3"},Kt={class:"input-group flex-nowrap"},Xt=l("i",{class:"fas fa-search",style:{color:"#fff"}},null,-1),Yt=[Xt],Jt={class:"list-group text-center my-4"},Qt=["onClick"],Wt={class:"col-md-9"},Zt={class:"row"},wt={class:"card card-all shadow-sm",style:{width:"18rem background-repeat:no-repeat","background-position":"center"}},te=["src","onClick"],ee={class:"card-body"},ae={class:"badge bg-secondary mb-3",style:{"font-size":"14px"}},se={class:"card-title",style:{"font-size":"16px"}},ne={class:"text-end mx-3"},le={key:0,class:"text-danger h5 mb-3"},ie={key:1,class:"mb-3"},oe={class:"h6"},re={class:"h5 text-danger"},ce=["onClick"];function de(t,i,s,h,c,d){const o=E("Loading"),u=E("ProductsBanner"),p=E("router-link"),y=E("Pagination");return k(),P("div",Ot,[S(o,{active:c.isLoading,class:"vld-overlay"},{default:B(()=>[Nt]),_:1},8,["active"]),S(u),l("nav",qt,[l("ol",Ht,[l("li",Gt,[S(p,{to:"/",class:"breadcrumb-link text-decoration-none"},{default:B(()=>[st("首頁")]),_:1})]),Ut])]),l("div",jt,[l("div",Vt,[l("div",Rt,[l("div",Kt,[l("span",{class:"input-group-text group-color",id:"addon-wrapping",onClick:i[0]||(i[0]=(...r)=>d.filterSearch&&d.filterSearch(...r))},Yt),tt(l("input",{type:"text",class:"form-control",placeholder:"請輸入產品名稱","aria-label":"Search","onUpdate:modelValue":i[1]||(i[1]=r=>c.search=r),onKeyup:i[2]||(i[2]=at((...r)=>d.filterSearch&&d.filterSearch(...r),["enter"]))},null,544),[[et,c.search]])]),l("div",Jt,[l("button",{type:"button",class:F(["list-group-item list-group-item-action",{active:c.category===""}]),onClick:i[3]||(i[3]=r=>d.setCategory(""))}," 全部的商品 ",2),(k(!0),P(H,null,G(c.categories,(r,g)=>(k(),P("button",{key:`${g}-${r}`,type:"button",class:F(["list-group-item list-group-item-action",{active:c.category===r}]),onClick:$=>d.setCategory(r)},A(r),11,Qt))),128))])]),l("div",Wt,[l("div",Zt,[(k(!0),P(H,null,G(c.filterProducts,r=>(k(),P("div",{key:r.id,class:"col-md-6 col-lg-4 mb-4"},[l("div",wt,[l("img",{class:"card-img-top card-products-img shadow-sm p-2",src:r.imageUrl,alt:"",onClick:g=>d.productLink(r.id),style:{cursor:"pointer"}},null,8,te),l("div",ee,[l("span",ae,A(r.category),1),l("h5",se,A(r.title),1),l("div",ne,[r.price===r.origin_price?(k(),P("div",le," NT$"+A(r.price),1)):(k(),P("div",ie,[l("del",oe," NT$"+A(r.origin_price),1),l("span",re," NT$"+A(r.price),1)]))]),l("button",{type:"button",class:"btn btn-danger w-100",onClick:O(g=>t.addToCart(r.id),["prevent"])}," 加入購物車 ",8,ce)])])]))),128)),S(y,{pages:c.page,"get-products":d.getProducts,onEmitPages:d.getProducts},null,8,["pages","get-products","onEmitPages"])])])])])])}const _e=U(Ft,[["render",de]]);export{_e as default};
