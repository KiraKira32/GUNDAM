import"./sweetalert2.all-ea697499.js";import{l as X,q as j,s as J,u as Y,v as Q,_ as U,o as $,c as k,b as n,n as F,g as O,F as G,i as q,t as A,S as Z,r as I,d as S,w as B,m as w,a as ee,x as te,y as V,z as ae,e as se}from"./index-3f9f644d.js";import{S as ne,a as le}from"./swiper-slide-25b26dc4.js";import{c as ie}from"./swiper.min-083e0b4a.js";import{A as oe}from"./autoplay-0c05f41b.js";import{c as K}from"./cart-8277642d.js";function z(e=""){return`.${e.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function re({swiper:e,extendParams:i,on:s,emit:h}){const c="swiper-pagination";i({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:t=>t,formatFractionTotal:t=>t,bulletClass:`${c}-bullet`,bulletActiveClass:`${c}-bullet-active`,modifierClass:`${c}-`,currentClass:`${c}-current`,totalClass:`${c}-total`,hiddenClass:`${c}-hidden`,progressbarFillClass:`${c}-progressbar-fill`,progressbarOppositeClass:`${c}-progressbar-opposite`,clickableClass:`${c}-clickable`,lockClass:`${c}-lock`,horizontalClass:`${c}-horizontal`,verticalClass:`${c}-vertical`,paginationDisabledClass:`${c}-disabled`}}),e.pagination={el:null,bullets:[]};let d,o=0;const u=t=>(Array.isArray(t)||(t=[t].filter(a=>!!a)),t);function p(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function y(t,a){const{bulletActiveClass:l}=e.params.pagination;t&&(t=t[`${a==="prev"?"previous":"next"}ElementSibling`],t&&(t.classList.add(`${l}-${a}`),t=t[`${a==="prev"?"previous":"next"}ElementSibling`],t&&t.classList.add(`${l}-${a}-${a}`)))}function r(t){const a=t.target.closest(z(e.params.pagination.bulletClass));if(!a)return;t.preventDefault();const l=j(a)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===l)return;const f=e.getSlideIndexByData(l),_=e.getSlideIndexByData(e.realIndex);f>e.slides.length-e.loopedSlides&&e.loopFix({direction:f>_?"next":"prev",activeSlideIndex:f,slideTo:!1}),e.slideToLoop(l)}else e.slideTo(l)}function m(){const t=e.rtl,a=e.params.pagination;if(p())return;let l=e.pagination.el;l=u(l);let f,_;const T=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,H=e.params.loop?Math.ceil(T/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(_=e.previousRealIndex||0,f=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(f=e.snapIndex,_=e.previousSnapIndex):(_=e.previousIndex||0,f=e.activeIndex||0),a.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const g=e.pagination.bullets;let L,b,D;if(a.dynamicBullets&&(d=X(g[0],e.isHorizontal()?"width":"height",!0),l.forEach(v=>{v.style[e.isHorizontal()?"width":"height"]=`${d*(a.dynamicMainBullets+4)}px`}),a.dynamicMainBullets>1&&_!==void 0&&(o+=f-(_||0),o>a.dynamicMainBullets-1?o=a.dynamicMainBullets-1:o<0&&(o=0)),L=Math.max(f-o,0),b=L+(Math.min(g.length,a.dynamicMainBullets)-1),D=(b+L)/2),g.forEach(v=>{const C=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(x=>`${a.bulletActiveClass}${x}`)].map(x=>typeof x=="string"&&x.includes(" ")?x.split(" "):x).flat();v.classList.remove(...C)}),l.length>1)g.forEach(v=>{const C=j(v);C===f&&v.classList.add(...a.bulletActiveClass.split(" ")),a.dynamicBullets&&(C>=L&&C<=b&&v.classList.add(...`${a.bulletActiveClass}-main`.split(" ")),C===L&&y(v,"prev"),C===b&&y(v,"next"))});else{const v=g[f];if(v&&v.classList.add(...a.bulletActiveClass.split(" ")),a.dynamicBullets){const C=g[L],x=g[b];for(let E=L;E<=b;E+=1)g[E]&&g[E].classList.add(...`${a.bulletActiveClass}-main`.split(" "));y(C,"prev"),y(x,"next")}}if(a.dynamicBullets){const v=Math.min(g.length,a.dynamicMainBullets+4),C=(d*v-d)/2-D*d,x=t?"right":"left";g.forEach(E=>{E.style[e.isHorizontal()?x:"top"]=`${C}px`})}}l.forEach((g,L)=>{if(a.type==="fraction"&&(g.querySelectorAll(z(a.currentClass)).forEach(b=>{b.textContent=a.formatFractionCurrent(f+1)}),g.querySelectorAll(z(a.totalClass)).forEach(b=>{b.textContent=a.formatFractionTotal(H)})),a.type==="progressbar"){let b;a.progressbarOpposite?b=e.isHorizontal()?"vertical":"horizontal":b=e.isHorizontal()?"horizontal":"vertical";const D=(f+1)/H;let v=1,C=1;b==="horizontal"?v=D:C=D,g.querySelectorAll(z(a.progressbarFillClass)).forEach(x=>{x.style.transform=`translate3d(0,0,0) scaleX(${v}) scaleY(${C})`,x.style.transitionDuration=`${e.params.speed}ms`})}a.type==="custom"&&a.renderCustom?(g.innerHTML=a.renderCustom(e,f+1,H),L===0&&h("paginationRender",g)):(L===0&&h("paginationRender",g),h("paginationUpdate",g)),e.params.watchOverflow&&e.enabled&&g.classList[e.isLocked?"add":"remove"](a.lockClass)})}function P(){const t=e.params.pagination;if(p())return;const a=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length;let l=e.pagination.el;l=u(l);let f="";if(t.type==="bullets"){let _=e.params.loop?Math.ceil(a/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&_>a&&(_=a);for(let T=0;T<_;T+=1)t.renderBullet?f+=t.renderBullet.call(e,T,t.bulletClass):f+=`<${t.bulletElement} class="${t.bulletClass}"></${t.bulletElement}>`}t.type==="fraction"&&(t.renderFraction?f=t.renderFraction.call(e,t.currentClass,t.totalClass):f=`<span class="${t.currentClass}"></span> / <span class="${t.totalClass}"></span>`),t.type==="progressbar"&&(t.renderProgressbar?f=t.renderProgressbar.call(e,t.progressbarFillClass):f=`<span class="${t.progressbarFillClass}"></span>`),e.pagination.bullets=[],l.forEach(_=>{t.type!=="custom"&&(_.innerHTML=f||""),t.type==="bullets"&&e.pagination.bullets.push(..._.querySelectorAll(z(t.bulletClass)))}),t.type!=="custom"&&h("paginationRender",l[0])}function M(){e.params.pagination=ie(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const t=e.params.pagination;if(!t.el)return;let a;typeof t.el=="string"&&e.isElement&&(a=e.el.shadowRoot.querySelector(t.el)),!a&&typeof t.el=="string"&&(a=[...document.querySelectorAll(t.el)]),a||(a=t.el),!(!a||a.length===0)&&(e.params.uniqueNavElements&&typeof t.el=="string"&&Array.isArray(a)&&a.length>1&&(a=[...e.el.querySelectorAll(t.el)],a.length>1&&(a=a.filter(l=>J(l,".swiper")[0]===e.el)[0])),Array.isArray(a)&&a.length===1&&(a=a[0]),Object.assign(e.pagination,{el:a}),a=u(a),a.forEach(l=>{t.type==="bullets"&&t.clickable&&l.classList.add(t.clickableClass),l.classList.add(t.modifierClass+t.type),l.classList.add(e.isHorizontal()?t.horizontalClass:t.verticalClass),t.type==="bullets"&&t.dynamicBullets&&(l.classList.add(`${t.modifierClass}${t.type}-dynamic`),o=0,t.dynamicMainBullets<1&&(t.dynamicMainBullets=1)),t.type==="progressbar"&&t.progressbarOpposite&&l.classList.add(t.progressbarOppositeClass),t.clickable&&l.addEventListener("click",r),e.enabled||l.classList.add(t.lockClass)}))}function N(){const t=e.params.pagination;if(p())return;let a=e.pagination.el;a&&(a=u(a),a.forEach(l=>{l.classList.remove(t.hiddenClass),l.classList.remove(t.modifierClass+t.type),l.classList.remove(e.isHorizontal()?t.horizontalClass:t.verticalClass),t.clickable&&l.removeEventListener("click",r)})),e.pagination.bullets&&e.pagination.bullets.forEach(l=>l.classList.remove(...t.bulletActiveClass.split(" ")))}s("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const t=e.params.pagination;let{el:a}=e.pagination;a=u(a),a.forEach(l=>{l.classList.remove(t.horizontalClass,t.verticalClass),l.classList.add(e.isHorizontal()?t.horizontalClass:t.verticalClass)})}),s("init",()=>{e.params.pagination.enabled===!1?R():(M(),P(),m())}),s("activeIndexChange",()=>{typeof e.snapIndex>"u"&&m()}),s("snapIndexChange",()=>{m()}),s("snapGridLengthChange",()=>{P(),m()}),s("destroy",()=>{N()}),s("enable disable",()=>{let{el:t}=e.pagination;t&&(t=u(t),t.forEach(a=>a.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),s("lock unlock",()=>{m()}),s("click",(t,a)=>{const l=a.target;let{el:f}=e.pagination;if(Array.isArray(f)||(f=[f].filter(_=>!!_)),e.params.pagination.el&&e.params.pagination.hideOnClick&&f&&f.length>0&&!l.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&l===e.navigation.nextEl||e.navigation.prevEl&&l===e.navigation.prevEl))return;const _=f[0].classList.contains(e.params.pagination.hiddenClass);h(_===!0?"paginationShow":"paginationHide"),f.forEach(T=>T.classList.toggle(e.params.pagination.hiddenClass))}});const W=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:t}=e.pagination;t&&(t=u(t),t.forEach(a=>a.classList.remove(e.params.pagination.paginationDisabledClass))),M(),P(),m()},R=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:t}=e.pagination;t&&(t=u(t),t.forEach(a=>a.classList.add(e.params.pagination.paginationDisabledClass))),N()};Object.assign(e.pagination,{enable:W,disable:R,render:P,update:m,init:M,destroy:N})}function ce(e){const{effect:i,swiper:s,on:h,setTranslate:c,setTransition:d,overwriteParams:o,perspective:u,recreateShadows:p,getEffectParams:y}=e;h("beforeInit",()=>{if(s.params.effect!==i)return;s.classNames.push(`${s.params.containerModifierClass}${i}`),u&&u()&&s.classNames.push(`${s.params.containerModifierClass}3d`);const m=o?o():{};Object.assign(s.params,m),Object.assign(s.originalParams,m)}),h("setTranslate",()=>{s.params.effect===i&&c()}),h("setTransition",(m,P)=>{s.params.effect===i&&d(P)}),h("transitionEnd",()=>{if(s.params.effect===i&&p){if(!y||!y().slideShadows)return;s.slides.forEach(m=>{m.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(P=>P.remove())}),p()}});let r;h("virtualUpdate",()=>{s.params.effect===i&&(s.slides.length||(r=!0),requestAnimationFrame(()=>{r&&s.slides&&s.slides.length&&(c(),r=!1)}))})}function de(e,i){const s=Y(i);return s!==i&&(s.style.backfaceVisibility="hidden",s.style["-webkit-backface-visibility"]="hidden"),s}function fe({swiper:e,duration:i,transformElements:s,allSlides:h}){const{activeIndex:c}=e,d=o=>o.parentElement?o.parentElement:e.slides.filter(p=>p.shadowEl&&p.shadowEl===o.parentNode)[0];if(e.params.virtualTranslate&&i!==0){let o=!1,u;h?u=s:u=s.filter(p=>{const y=p.classList.contains("swiper-slide-transform")?d(p):p;return e.getSlideIndex(y)===c}),u.forEach(p=>{Q(p,()=>{if(o||!e||e.destroyed)return;o=!0,e.animating=!1;const y=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});e.wrapperEl.dispatchEvent(y)})})}}function ue({swiper:e,extendParams:i,on:s}){i({fadeEffect:{crossFade:!1}}),ce({effect:"fade",swiper:e,on:s,setTranslate:()=>{const{slides:d}=e,o=e.params.fadeEffect;for(let u=0;u<d.length;u+=1){const p=e.slides[u];let r=-p.swiperSlideOffset;e.params.virtualTranslate||(r-=e.translate);let m=0;e.isHorizontal()||(m=r,r=0);const P=e.params.fadeEffect.crossFade?Math.max(1-Math.abs(p.progress),0):1+Math.min(Math.max(p.progress,-1),0),M=de(o,p);M.style.opacity=P,M.style.transform=`translate3d(${r}px, ${m}px, 0px)`}},setTransition:d=>{const o=e.slides.map(u=>Y(u));o.forEach(u=>{u.style.transitionDuration=`${d}ms`}),fe({swiper:e,duration:d,transformElements:o,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!e.params.cssMode})})}const pe={props:["pages","categories","search"],methods:{updatePage(e){this.$emit("emitPages",e)},scrollTop(){window.scrollTo(0,0)}}},ge={"aria-label":"Page navigation example"},me={class:"pagination justify-content-center"},he=n("span",{"aria-hidden":"true"},"«",-1),_e=[he],ve=["onClick"],ye=n("span",{"aria-hidden":"true"},"»",-1),be=[ye];function Ce(e,i,s,h,c,d){return $(),k("div",{class:"pagintion-container",onClick:i[2]||(i[2]=(...o)=>d.scrollTop&&d.scrollTop(...o))},[n("nav",ge,[n("ul",me,[n("li",{class:F(["page-item",{disabled:!s.pages.has_pre}])},[n("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:i[0]||(i[0]=O(o=>d.updatePage(s.pages.current_page-1),["prevent"]))},_e)],2),($(!0),k(G,null,q(s.pages.total_pages,o=>($(),k("li",{class:F(["page-item",{active:o===s.pages.current_page}]),key:o+"page"},[n("a",{class:"page-link",href:"#",onClick:O(u=>d.updatePage(o),["prevent"])},A(o),9,ve)],2))),128)),n("li",{class:F(["page-item",{disabled:!s.pages.has_next}])},[n("a",{class:"page-link",href:"#","aria-label":"Next",onClick:i[1]||(i[1]=O(o=>d.updatePage(s.pages.current_page+1),["prevent"]))},be)],2)])])])}const xe=U(pe,[["render",Ce]]);const $e="/GUNDAM/assets/開幕優惠-89fa4197.png",ke="/GUNDAM/assets/限時滿額免運-f0fd7cef.png",Pe="/GUNDAM/assets/模型宣傳圖-b5a06054.png",Le="/GUNDAM/assets/recruit-24573e72.png";Z.use([oe]);const Se={components:{Swiper:ne,SwiperSlide:le},data(){return{modules:[re,ue]}}},Te={class:"container products-banner-container p-0"},Ae={class:"products-banner"},Be=n("img",{class:"shadow-sm",src:$e,alt:""},null,-1),Me=n("img",{class:"shadow-sm",src:ke,alt:""},null,-1),Ee=n("img",{class:"shadow-sm",src:Pe,alt:""},null,-1),Ie=n("img",{class:"shadow-sm",src:Le,alt:""},null,-1);function De(e,i,s,h,c,d){const o=I("swiper-slide"),u=I("swiper");return $(),k("div",Te,[n("div",Ae,[S(u,{spaceBetween:1,loop:!0,autoplay:{delay:6e3,disableOnInteraction:!1},modules:c.modules,class:"mySwiper-products"},{default:B(()=>[S(o,{class:"open-banner d-flex justify-content-center"},{default:B(()=>[Be]),_:1}),S(o,{class:"freight-banner d-flex justify-content-center"},{default:B(()=>[Me]),_:1}),S(o,{class:"publicity-banner d-flex justify-content-center"},{default:B(()=>[Ee]),_:1}),S(o,{class:"recruit-banner d-flex justify-content-center"},{default:B(()=>[Ie]),_:1})]),_:1},8,["modules"])])])}const ze=U(Se,[["render",De]]);const Fe={components:{Pagination:xe,ProductsBanner:ze},data(){return{page:{},isLoading:!1,products:[],productsAll:[],filterProducts:[],category:"",categories:[],search:""}},methods:{getProducts(e=1){this.isLoading=!0;let i=`https://vue3-course-api.hexschool.io/v2/api/asher_api/products?page=${e}&category=${this.category}`;this.$http.get(i).then(s=>{this.isLoading=!1,this.products=s.data.products,this.page=s.data.pagination,this.filterProducts=this.products})},getProductsAll(){const e="https://vue3-course-api.hexschool.io/v2/api/asher_api/products/all";this.isLoading=!0,this.$http.get(e).then(i=>{this.productsAll=i.data.products,this.isLoading=!1,this.createCategories()})},createCategories(){if(this.productsAll.length!==0){const e=this.productsAll.map(i=>i.category);this.categories=[...new Set(e)]}else this.filterProducts=this.products},setCategory(e){this.category=e,this.getProducts()},productLink(e){this.$router.push(`/product/${e}`)},...w(K,["addToCart","getCart"]),filterSearch(){this.isLoading=!0,setTimeout(()=>{this.filterProducts=this.productsAll.filter(e=>e.title.match(this.search)),this.isLoading=!1,this.search&&this.filterProducts.length<10?this.page={total_pages:1,current_page:1,has_pre:!1,has_next:!1}:this.page={total_pages:1,current_page:1,has_pre:!1,has_next:!1}},1e3)},scrollTop(){window.scrollTo(0,0)}},watch:{category(){this.getProducts()},search(){this.search?this.filterSearch():this.createCategories()}},computed:{...ee(K,["cartData"])},mounted(){this.getCart(),this.scrollTop(),this.getProducts(),this.getProductsAll()}},Oe={class:"container container-products"},Ne=n("div",{class:"loadingio-spinner-ripple"},[n("div",{class:"ldio-content"},[n("div"),n("div")])],-1),He={"aria-label":"breadcrumb"},Ge={class:"breadcrumb pt-3"},qe={class:"breadcrumb-item"},Ue=n("li",{class:"breadcrumb-item active","aria-current":"page"},"商品",-1),Re={class:"productlist"},je={class:"row"},Ve={class:"col-md-3"},Ke={class:"input-group flex-nowrap"},Ye=n("i",{class:"fas fa-search",style:{color:"#fff"}},null,-1),We=[Ye],Xe={class:"list-group text-center my-4"},Je=["disabled"],Qe=["onClick","disabled"],Ze={class:"col-md-9"},we={class:"row"},et={class:"card card-all shadow-sm",style:{width:"18rem background-repeat:no-repeat","background-position":"center"}},tt=["src","onClick"],at={class:"card-body"},st={class:"badge card-badge bg-secondary mb-3",style:{"font-size":"14px"}},nt={class:"card-title",style:{"font-size":"16px"}},lt={class:"text-end mx-3"},it={key:0,class:"text-danger h5 mb-3"},ot={key:1,class:"mb-3"},rt={class:"h6"},ct={class:"h5 text-danger"},dt=["onClick"];function ft(e,i,s,h,c,d){const o=I("Loading"),u=I("ProductsBanner"),p=I("router-link"),y=I("Pagination");return $(),k("div",Oe,[S(o,{active:c.isLoading,class:"vld-overlay"},{default:B(()=>[Ne]),_:1},8,["active"]),S(u),n("nav",He,[n("ol",Ge,[n("li",qe,[S(p,{to:"/",class:"breadcrumb-link text-decoration-none"},{default:B(()=>[se("首頁")]),_:1})]),Ue])]),n("div",Re,[n("div",je,[n("div",Ve,[n("div",Ke,[n("span",{class:"input-group-text group-color",id:"addon-wrapping",onClick:i[0]||(i[0]=(...r)=>d.filterSearch&&d.filterSearch(...r)),style:{cursor:"pointer"}},We),te(n("input",{type:"text",class:"form-control search-text",placeholder:"請輸入產品名稱","aria-label":"Search","onUpdate:modelValue":[i[1]||(i[1]=r=>c.search=r),i[2]||(i[2]=r=>e.form.F_KEYWORD.value=r)],id:"F_KEYWORD",onKeyup:i[3]||(i[3]=ae((...r)=>d.filterSearch&&d.filterSearch(...r),["enter"]))},null,544),[[V,c.search,void 0,{trim:!0}],[V,e.form.F_KEYWORD.value]])]),n("div",Xe,[n("button",{type:"button",class:F(["list-group-item list-group-item-action",{active:c.category===""}]),onClick:i[4]||(i[4]=r=>d.setCategory("")),disabled:c.category===""}," 全部的商品 ",10,Je),($(!0),k(G,null,q(c.categories,r=>($(),k("div",{key:r.id},[n("button",{type:"button",class:F(["list-group-item list-group-item-action",{active:c.category===r}]),onClick:m=>d.setCategory(r),disabled:c.category===r},A(r),11,Qe)]))),128))])]),n("div",Ze,[n("div",we,[($(!0),k(G,null,q(c.filterProducts,r=>($(),k("div",{key:r.id,class:"col-md-6 col-lg-4 col-6 mb-4"},[n("div",et,[n("img",{class:"card-img-top card-products-img shadow-sm p-2",src:r.imageUrl,alt:"",onClick:m=>d.productLink(r.id),style:{cursor:"pointer"}},null,8,tt),n("div",at,[n("span",st,A(r.category),1),n("h5",nt,A(r.title),1),n("div",lt,[r.price===r.origin_price?($(),k("div",it," NT$"+A(r.price),1)):($(),k("div",ot,[n("del",rt," NT$"+A(r.origin_price),1),n("span",ct," NT$"+A(r.price),1)]))]),n("button",{type:"button",class:"btn btn-danger w-100 add-product",onClick:O(m=>e.addToCart(r.id),["prevent"])}," 加入購物車 ",8,dt)])])]))),128)),S(y,{pages:c.page,"get-products":d.getProducts,onEmitPages:d.getProducts},null,8,["pages","get-products","onEmitPages"])])])])])])}const vt=U(Fe,[["render",ft]]);export{vt as default};
